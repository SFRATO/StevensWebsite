---
/**
 * FormSuccess Component
 * Reusable success state shown after form submission
 */
interface Props {
  formType?: 'market-report' | 'contact';
  showEmailTimeline?: boolean;
}

const {
  formType = 'contact',
  showEmailTimeline = true,
} = Astro.props;

const isMarketReport = formType === 'market-report';
const phone = '(609) 789-0126';
const phoneHref = 'tel:+16097890126';
---

<div class="form-success" id="form-success" style="display: none;">
  <div class="success-icon">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
      <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <h3 class="success-title">
    {isMarketReport ? "Your Report is On the Way!" : "Message Sent!"}
  </h3>

  <p class="success-message">
    {isMarketReport
      ? "Thanks for requesting your free market report. Check your inbox shortly."
      : "Thanks for reaching out! I'll get back to you within 24 hours."
    }
  </p>

  {showEmailTimeline && (
    <div class="what-next">
      <h4>What Happens Next</h4>
      <ul class="timeline">
        {isMarketReport ? (
          <>
            <li>
              <span class="timeline-marker">1</span>
              <span class="timeline-text">Your personalized market report will arrive in your inbox within 24 hours</span>
            </li>
            <li>
              <span class="timeline-marker">2</span>
              <span class="timeline-text">You'll receive helpful market insights over the next few weeks</span>
            </li>
            <li>
              <span class="timeline-marker">3</span>
              <span class="timeline-text">I'm available to answer any questions about your home's value</span>
            </li>
          </>
        ) : (
          <>
            <li>
              <span class="timeline-marker">1</span>
              <span class="timeline-text">I'll review your message personally</span>
            </li>
            <li>
              <span class="timeline-marker">2</span>
              <span class="timeline-text">You'll hear back within 24 hours (usually sooner)</span>
            </li>
            <li>
              <span class="timeline-marker">3</span>
              <span class="timeline-text">We'll schedule a call or meeting at your convenience</span>
            </li>
          </>
        )}
      </ul>
    </div>
  )}

  <div class="success-cta">
    <p class="cta-text">Need to talk sooner? Call me directly:</p>
    <a href={phoneHref} class="btn btn-primary">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
        <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" stroke="currentColor" stroke-width="2"/>
      </svg>
      {phone}
    </a>
  </div>
</div>

<style>
  .form-success {
    text-align: center;
    padding: var(--space-8);
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    max-width: 500px;
    margin: 0 auto;
  }

  .success-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    background: rgba(76, 175, 80, 0.1);
    border-radius: var(--radius-full);
    color: var(--accent-green);
    margin-bottom: var(--space-4);
  }

  .success-title {
    font-size: var(--text-2xl);
    color: var(--text-primary);
    margin-bottom: var(--space-3);
  }

  .success-message {
    font-size: var(--text-base);
    color: var(--text-secondary);
    margin-bottom: var(--space-6);
  }

  .what-next {
    background: var(--off-white);
    padding: var(--space-5);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-6);
    text-align: left;
  }

  .what-next h4 {
    font-size: var(--text-sm);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--c21-gold);
    margin-bottom: var(--space-4);
    text-align: center;
  }

  .timeline {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
  }

  .timeline li {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
  }

  .timeline-marker {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    min-width: 24px;
    background: var(--c21-gold);
    color: var(--white);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
  }

  .timeline-text {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    line-height: 1.5;
  }

  .success-cta {
    padding-top: var(--space-4);
    border-top: 1px solid var(--border-color);
  }

  .cta-text {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-3);
  }

  .success-cta .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-6);
    background-color: var(--c21-gold);
    color: var(--white);
    border-radius: var(--radius-md);
    font-weight: var(--font-semibold);
    text-decoration: none;
    transition: all var(--transition-base);
  }

  .success-cta .btn:hover {
    background-color: var(--c21-gold-dark);
  }
</style>
